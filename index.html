<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Calendario Iglesia 2025</title>
</head>
<body>
    <a id="btn-ios" href="webcal://p158-caldav.icloud.com/published/2/MTYyMzg4NDUwMjAxNjIzOFc_RCw-iCOSeM_LMqkWZcQMuX9sTzZF-PyrU9d06Oy4V0VhxUSZVqCmqzUsygyCHgAllfl2DFW34WcFi8EvPD8">A침adir a Apple Calendar</a>
    <a id="btn-gcal" href="#">Abrir en Google Calendar</a>

    <script>
        // Bot칩n iOS - Apple Calendar
        document.getElementById("btn-ios").addEventListener("click", function(event) {
            event.preventDefault();
            const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
            const url = "webcal://p158-caldav.icloud.com/published/2/MTYyMzg4NDUwMjAxNjIzOFc_RCw-iCOSeM_LMqkWZcQMuX9sTzZF-PyrU9d06Oy4V0VhxUSZVqCmqzUsygyCHgAllfl2DFW34WcFi8EvPD8";

            if (window.self !== window.top && isIOS) {
                window.top.location.href = url;
            } else {
                window.location.href = url;
            }

            setTimeout(function() {
                alert("Si no se abri칩 el calendario, copia y pega este enlace en Safari:\n" + url);
            }, 2500);
        });
    </script>

    <script>
        // Bot칩n Google Calendar
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        const isAndroid = /Android/i.test(navigator.userAgent);

        document.getElementById("btn-gcal").addEventListener("click", function (event) {
            event.preventDefault();

            if (isAndroid) {
                const intentUrl = "intent://calendar.google.com/calendar/u/0?cid=72086005a3ac9a324642e6977fb8f296d531c3520b03c6cf342495ed215e0186%40group.calendar.google.com#Intent;scheme=https;package=com.google.android.calendar;end";
                const playStore = "https://play.google.com/store/apps/details?id=com.google.android.calendar";

                if (window.self !== window.top) {
                    window.top.location.href = intentUrl;
                } else {
                    window.location.href = intentUrl;
                }

                setTimeout(function () {
                    if (window.self !== window.top) {
                        window.top.location.href = playStore;
                    } else {
                        window.location.href = playStore;
                    }
                }, 2000);

            } else if (isIOS) {
                const gcalIOS = "comgooglecalendar://";
                const appStore = "https://apps.apple.com/app/google-calendar/id909319292";

                if (window.self !== window.top) {
                    window.top.location.href = gcalIOS;
                } else {
                    window.location.href = gcalIOS;
                }

                setTimeout(function () {
                    const altScheme = "googlecalendar://";
                    if (window.self !== window.top) {
                        window.top.location.href = altScheme;
                    } else {
                        window.location.href = altScheme;
                    }
                }, 600);

                setTimeout(function () {
                    if (window.self !== window.top) {
                        window.top.location.href = appStore;
                    } else {
                        window.location.href = appStore;
                    }
                }, 2000);

            } else {
                window.location.href = "https://calendar.google.com";
            }
        });
    </script>
</body>
</html>